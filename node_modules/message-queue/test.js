const mq = require('message-queue');
const RSMQPromise = require('rsmq-promise');
const logger = require('logger');

const rsmq = new RSMQPromise({
    host: "127.0.0.1", 
    port: 6379
});

describe('message-queue.js', () => {
    it ('should instantiate queues', function(done) {
        this.timeout(30000);
        for (var i = 0; i < 100000; i++) {
            rsmq.sendMessage({qname: 'getartistdetails-handler', message: 'Hello world!'})
                .then((res) => logger.info(JSON.stringify(res)));
        }
        // done();
    })
});