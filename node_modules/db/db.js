const logger = require('logger');
const {
    User,
    Artist
} = require('models');

function DB(socketUtil) {
    this.socket = socketUtil;
}

DB.prototype.addAllArtists = function (user, artists) {
    return new Promise((resolve, reject) => {
        if (!user || !user._id)
            return reject(new Error('Could not add all artists. User not found.'));

        User.findOne({
            '_id': user._id
        }).then((user) => {
            let promises = [];
            for (let i of artists)
                promises.push(this.addAllArtists(user, artists[i]));
            return promises;
        }).then((promises) => Promise.all(promises))
        .then((results) => resolve())
        .catch((err) => {
            reject(err);
        });
    });
}

module.exports = DB;